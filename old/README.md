# sclean

A tool to clean obsolete hash-code files, which created by building tools, such as webpack, gulp, etc(for server side).

## Quick start

Install sclean:

```
npm install sclean -g
```

Init:

```
sclean init
```

## 1. Command line.

```
sclean <command> [args]
```

### 1.1 `init`: Init current directory for clean.

```
sclean init
```

This command will generate a `sclean.config.js` file in current directory.

* `since`: `v0.0.1`

### 1.2 `archive`: Archive target directory.

```
sclean archive
```

This command will pack target directory into a `zip` file. 

* `since`: `v0.0.1`

### 1.3 `clean`: Clean obsolete files generated by revision(filename by each file's hash code).

```
sclean
``` 

or

```
sclean clean
```

`clean` is the default command.

* `since`: `v0.0.1`
* `note`: This command will only clean `js` and `css` obsolete files.

### 1.4 `restore`: Restore target directory to last nth archive state.

```
sclean restore [-i 1] [--index 2]
```

This command will restore target directory to last nth archive state from `zip` files.

* `since`: `v0.0.1`
* Can take `-i, --index` argument, which means last nth state, and default is `1`.

## 2. Project config.

Defined in `sclean.config.js`.

### target

- `desc`: Target directory to handle.
- `type`: `string`
- `default`: `dist`
- `since`: `v0.0.1`

### htmlExtension

- `desc`: Html extension, such as `html`, `jsp`, `php`.
- `type`: `string`
- `default`: `html`
- `since`: `v0.0.1`

### hashLength

- `desc`: Hash code length.
- `type`: `int`
- `default`: `32`
- `since`: `v0.0.1`

### testChunkFile

- `desc`: Test a file is a chunk js file or not. See [Dynamic Imports](https://webpack.js.org/guides/code-splitting/#dynamic-imports).
- `type`: `RegExp`
- `default`: `/^[0-9]{1,4}\./`
- `since`: `v0.0.1`

## 3. Examples

See [sclean examples](./examples).
